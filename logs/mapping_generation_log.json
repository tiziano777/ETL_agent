{"samples": [{"prompt": "Se 'caldo' sta a 'freddo' come 'giorno' sta a 'notte', a cosa sta 'alto' in relazione a 'basso'? Analizza la relazione di opposti.", "response": "Alto sta a basso, perché alto e basso sono opposti, così come caldo e freddo o giorno e notte."}], "mapped_samples": [{"template": "fc_chat_st", "system": null, "context": null, "messages": [{"content": "Map the prompt to the content of the first message.", "role": "USER", "functioncall": null, "think": null, "context": null}, {"content": "Map the response to the content of the second message.", "role": "ASSISTANT", "functioncall": null, "think": null, "context": null}], "_lang": null, "_dataset_name": null, "_filename": null, "_subpath": "data", "_id_hash": null}], "metadata": {"_subpath": "data", "_file_name": "glaive"}, "src_schema": {"type": "object", "properties": {"prompt": {"type": "string", "description": "The prompt provided to the model.", "examples": ["Se 'caldo' sta a 'freddo' come 'giorno' sta a 'notte', a cosa sta 'alto' in relazione a 'basso'? Analizza la relazione di opposti."]}, "response": {"type": "string", "description": "The model's response to the prompt.", "examples": ["Alto sta a basso, perché alto e basso sono opposti, così come caldo e freddo o giorno e notte."]}}, "required": ["prompt", "response"], "description": "Schema for a prompt-response pair."}, "dst_schema": {"$schema": "http://json-schema.org/draft-07/schema#", "title": "Almawave Schema Template 2", "type": "object", "properties": {"template": {"type": "string", "description": "A JSON schema template defining the structure of the data.", "enum": ["fc_chat_st", "fc_chat", "chat_st", "chat", "chat_template"], "default": "fc_chat_st"}, "system": {"type": ["string", "null"], "description": "System prompt instructions for the LLM.", "default": null}, "context": {"type": ["string", "null"], "description": "Global conversation context, separate from per-message context.", "default": null}, "messages": {"type": "array", "description": "Conversation turns between USER and ASSISTANT.", "items": {"type": "object", "properties": {"role": {"type": "string", "enum": ["USER", "ASSISTANT"], "description": "The role of the message sender."}, "content": {"type": ["string", "null"], "description": "The textual content of the message, if any."}, "functioncall": {"type": ["object", "null"], "description": "Optional function call metadata for this message.", "default": null, "properties": {"payload": {"type": "string", "description": "Serialized function call request."}, "response": {"type": "string", "description": "Serialized function call response."}}, "required": ["payload", "response"]}, "think": {"type": ["string", "null"], "description": "Optional chain-of-thought or reasoning trace.", "default": null}, "context": {"type": ["string", "null"], "description": "Optional context specific to this message.", "default": null}}, "required": ["role"]}, "minItems": 1}, "_lang": {"type": ["string", "null"], "description": "Language of the dataset.", "default": null}, "_dataset_name": {"type": ["string", "null"], "description": "The name of the dataset to be processed.", "default": null}, "_filename": {"type": ["string", "null"], "description": "The file name of the dataset to be processed.", "default": null}, "_subpath": {"type": ["string", "null"], "description": "The subpath of the dataset to be processed.", "default": null}, "_id_hash": {"type": ["string", "null"], "description": "Unique identifier hash of the dataset.", "default": null}}, "required": ["messages"], "additionalProperties": false}, "chat_history": [{"content": "You are an expert data transformation and mapping assistant. Your task is to generate a JSON mapping file that describes how to transform data from a source (src) JSON schema to a destination (target) JSON schema. The mapping file must be in a standard JSON format.\nInstructions:\nAnalyze the fields in the src_schema and target_schema. Generate a JSON array called mapping.json Each object within the mappings array must have the following properties:\n  **src_field**: The path of the field in the src_schema. Use \"N/A\" if there is no direct source.\n  **target_field**: The path of the field in the target_schema.\n  **transformation**: The transformation explanation or fixed value.\nIf src_field is not null, transformation must contain a descriptive string of the mapping logic. If src_field is null, transformation must contain the exact fixed value to be inserted (e.g., \"USER\") or a description of the calculation to be performed. you have also to map metadatas (fields starting with _) in the target_schema by direct assignment of fixed values.\nOutput format example:  [\n      {\n        'src_field': 'source_field_path | null',\n        'target_field': 'target_field_path | _metadata_field',\n        'transformation': 'transformation_logic | fixed_value'\n      },\n      ...\n]\n\nEnsure the output is valid JSON and adheres to the specified structure. src_schema and metadata: {\n  \"_subpath\": \"data\",\n  \"_file_name\": \"glaive\"\n} {\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"type\": \"string\",\n      \"description\": \"The prompt provided to the model.\",\n      \"examples\": [\n        \"Se 'caldo' sta a 'freddo' come 'giorno' sta a 'notte', a cosa sta 'alto' in relazione a 'basso'? Analizza la relazione di opposti.\"\n      ]\n    },\n    \"response\": {\n      \"type\": \"string\",\n      \"description\": \"The model's response to the prompt.\",\n      \"examples\": [\n        \"Alto sta a basso, perch\\u00e9 alto e basso sono opposti, cos\\u00ec come caldo e freddo o giorno e notte.\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"response\"\n  ],\n  \"description\": \"Schema for a prompt-response pair.\"\n}\ntarget_schema: {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Almawave Schema Template 2\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"template\": {\n      \"type\": \"string\",\n      \"description\": \"A JSON schema template defining the structure of the data.\",\n      \"enum\": [\n        \"fc_chat_st\",\n        \"fc_chat\",\n        \"chat_st\",\n        \"chat\",\n        \"chat_template\"\n      ],\n      \"default\": \"fc_chat_st\"\n    },\n    \"system\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"System prompt instructions for the LLM.\",\n      \"default\": null\n    },\n    \"context\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"Global conversation context, separate from per-message context.\",\n      \"default\": null\n    },\n    \"messages\": {\n      \"type\": \"array\",\n      \"description\": \"Conversation turns between USER and ASSISTANT.\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"role\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"USER\",\n              \"ASSISTANT\"\n            ],\n            \"description\": \"The role of the message sender.\"\n          },\n          \"content\": {\n            \"type\": [\n              \"string\",\n              \"null\"\n            ],\n            \"description\": \"The textual content of the message, if any.\"\n          },\n          \"functioncall\": {\n            \"type\": [\n              \"object\",\n              \"null\"\n            ],\n            \"description\": \"Optional function call metadata for this message.\",\n            \"default\": null,\n            \"properties\": {\n              \"payload\": {\n                \"type\": \"string\",\n                \"description\": \"Serialized function call request.\"\n              },\n              \"response\": {\n                \"type\": \"string\",\n                \"description\": \"Serialized function call response.\"\n              }\n            },\n            \"required\": [\n              \"payload\",\n              \"response\"\n            ]\n          },\n          \"think\": {\n            \"type\": [\n              \"string\",\n              \"null\"\n            ],\n            \"description\": \"Optional chain-of-thought or reasoning trace.\",\n            \"default\": null\n          },\n          \"context\": {\n            \"type\": [\n              \"string\",\n              \"null\"\n            ],\n            \"description\": \"Optional context specific to this message.\",\n            \"default\": null\n          }\n        },\n        \"required\": [\n          \"role\"\n        ]\n      },\n      \"minItems\": 1\n    },\n    \"_lang\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"Language of the dataset.\",\n      \"default\": null\n    },\n    \"_dataset_name\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"The name of the dataset to be processed.\",\n      \"default\": null\n    },\n    \"_filename\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"The file name of the dataset to be processed.\",\n      \"default\": null\n    },\n    \"_subpath\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"The subpath of the dataset to be processed.\",\n      \"default\": null\n    },\n    \"_id_hash\": {\n      \"type\": [\n        \"string\",\n        \"null\"\n      ],\n      \"description\": \"Unique identifier hash of the dataset.\",\n      \"default\": null\n    }\n  },\n  \"required\": [\n    \"messages\"\n  ],\n  \"additionalProperties\": false\n}\nactual mapping_schema: N/A\n", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": null}, {"content": "[\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"template\",\n    \"transformation\": \"fc_chat_st\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"system\",\n    \"transformation\": \"null\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"context\",\n    \"transformation\": \"null\"\n  },\n  {\n    \"src_field\": \"prompt\",\n    \"target_field\": \"messages[0].content\",\n    \"transformation\": \"Map the prompt to the content of the first message.\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"messages[0].role\",\n    \"transformation\": \"USER\"\n  },\n  {\n    \"src_field\": \"response\",\n    \"target_field\": \"messages[1].content\",\n    \"transformation\": \"Map the response to the content of the second message.\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"messages[1].role\",\n    \"transformation\": \"ASSISTANT\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"_lang\",\n    \"transformation\": \"null\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"_dataset_name\",\n    \"transformation\": \"null\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"_filename\",\n    \"transformation\": \"null\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"_subpath\",\n    \"transformation\": \"data\"\n  },\n  {\n    \"src_field\": \"N/A\",\n    \"target_field\": \"_id_hash\",\n    \"transformation\": \"null\"\n  }\n]", "additional_kwargs": {}, "response_metadata": {}, "type": "ai", "name": null, "id": null}], "feedback": null, "mapping": [{"src_field": "N/A", "target_field": "template", "transformation": "fc_chat_st"}, {"src_field": "N/A", "target_field": "system", "transformation": "null"}, {"src_field": "N/A", "target_field": "context", "transformation": "null"}, {"src_field": "prompt", "target_field": "messages[0].content", "transformation": "Map the prompt to the content of the first message."}, {"src_field": "N/A", "target_field": "messages[0].role", "transformation": "USER"}, {"src_field": "response", "target_field": "messages[1].content", "transformation": "Map the response to the content of the second message."}, {"src_field": "N/A", "target_field": "messages[1].role", "transformation": "ASSISTANT"}, {"src_field": "N/A", "target_field": "_lang", "transformation": "null"}, {"src_field": "N/A", "target_field": "_dataset_name", "transformation": "null"}, {"src_field": "N/A", "target_field": "_filename", "transformation": "null"}, {"src_field": "N/A", "target_field": "_subpath", "transformation": "data"}, {"src_field": "N/A", "target_field": "_id_hash", "transformation": "null"}], "accept_mapping_generation": "break", "valid": true, "output_path": "/Users/T.Finizzi/repo/ETL_agent/data/glaive_dataset/mapping.json", "error_messages": []}
